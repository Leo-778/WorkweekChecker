<Window x:Class="WorkweekChecker.Views.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ctrls="clr-namespace:WorkweekChecker.Controls"
        Title="设置" Height="480" Width="825"
        WindowStartupLocation="CenterOwner">
    <Window.Background>
        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
            <GradientStop Color="{DynamicResource BgTop}" Offset="0"/>
            <GradientStop Color="{DynamicResource BgBottom}" Offset="0"/>
        </LinearGradientBrush>
    </Window.Background>
    <Grid Margin="16">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="250*"/>
            <ColumnDefinition Width="543*"/>
        </Grid.ColumnDefinitions>
        <TabControl SelectedIndex="0" Grid.ColumnSpan="2">
            <TabItem Header="基准周" Margin="0,0,-21,0">
                <Grid Margin="12">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <TextBlock Text="选择任意属于“双休周”的日期（保存时自动换算为该周周一）" Margin="0,0,0,8" Foreground="{DynamicResource TextSecondary}"/>
                    <StackPanel Grid.Row="1" Orientation="Horizontal">
                        <ctrls:ModernDatePicker Width="218" SelectedDate="{Binding BaseWeekAnyDate, Mode=TwoWay}"/>
                        <Button Content="保存" Command="{Binding SaveBaseCommand}" Style="{DynamicResource PrimaryButton}"/>
                        <Button Content="恢复默认" Command="{Binding ResetBaseCommand}" Style="{DynamicResource SecondaryButton}"/>
                    </StackPanel>
                </Grid>
            </TabItem>
            <TabItem Header="法定节假日 / 调休" Margin="25,0,-37,0">
                <Grid Margin="12">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <StackPanel Orientation="Horizontal" Grid.Row="0">
                        <Button Content="导入官方节假日..." Command="{Binding ImportOfficialCommand}" Style="{DynamicResource PrimaryButton}"/>
                        <Button Content="写入2025国务院方案" Command="{Binding Apply2025Command}" Style="{DynamicResource SecondaryButton}" Margin="8,0,0,0"/>
                        <Button Content="写入2026国务院方案" Style="{DynamicResource SecondaryButton}" IsEnabled="False" ToolTip="截至 2025-08-11，2026 年官方安排未发布，待发布后更新。" Margin="8,0,0,0"/>
                    </StackPanel>
                    <Grid Grid.Row="1">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Border Style="{DynamicResource Card}" Margin="0,0,8,0">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <TextBlock Text="放假日（休息）" Style="{DynamicResource SectionTitle}"/>
                                <ListBox Grid.Row="1" ItemsSource="{Binding SpecialHolidays}" SelectedItem="{Binding SelectedHoliday}">
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding StringFormat={}{0:yyyy-MM-dd dddd}}"/>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                                <StackPanel Grid.Row="2" Orientation="Horizontal" Margin="0,8,0,0">
                                    <ctrls:ModernDatePicker Width="180" SelectedDate="{Binding NewHoliday, Mode=TwoWay}"/>
                                    <Button Content="添加" Command="{Binding AddHolidayCommand}" Style="{DynamicResource PrimaryButton}"/>
                                    <Button Content="删除选中" Command="{Binding RemoveHolidayCommand}" Style="{DynamicResource SecondaryButton}"/>
                                </StackPanel>
                            </Grid>
                        </Border>
                        <Border Grid.Column="1" Style="{DynamicResource Card}" Margin="8,0,0,0">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <TextBlock Text="调休补班（工作）" Style="{DynamicResource SectionTitle}"/>
                                <ListBox Grid.Row="1" ItemsSource="{Binding SpecialWorkdays}" SelectedItem="{Binding SelectedWorkday}">
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding StringFormat={}{0:yyyy-MM-dd dddd}}"/>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                                <StackPanel Grid.Row="2" Orientation="Horizontal" Margin="0,8,0,0">
                                    <ctrls:ModernDatePicker Width="180" SelectedDate="{Binding NewWorkday, Mode=TwoWay}"/>
                                    <Button Content="添加" Command="{Binding AddWorkdayCommand}" Style="{DynamicResource PrimaryButton}"/>
                                    <Button Content="删除选中" Command="{Binding RemoveWorkdayCommand}" Style="{DynamicResource SecondaryButton}"/>
                                </StackPanel>
                            </Grid>
                        </Border>
                    </Grid>
                </Grid>
            </TabItem>
        </TabControl>
    </Grid>
</Window>
